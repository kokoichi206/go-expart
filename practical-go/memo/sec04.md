## インタフェース

## 活用事例を知る

- error
- fmt.Stringer
- fmt.GoStringer
  - fmt.Println や log パッケージでインスタンスをログ出力する時
- io.Reader
- io.Writer
- http.ResponseWriter

シンプルなインタフェースを使う API をコアとして作り、それをラップして使いやすい API を別に提供するのが、Go で広く行われている設計手法。

「テストの時にモックに差し替えられるよう、部品となる構造体へのアクセスをインタフェース経由にする」という使い方もできる。このケースでは、Docker を使ってバックエンドを立ち上げてしまう方法もあるので、その辺の検討が必要。

ポリモーフィズムは実現できても継承ができない、シンプルな用途に特化した機能を提供！

## any

any の正体は interface{} のエイリアス。

ジェネリクスの導入によるメリット

- 返り値が any で、受け取り側で毎回キャストが必要
- ポインターと値のうち、ポインターだけを受け取れるようにしたい

## memo

- go command で、特定の OC, アーキテクチャにのみビルドを含めたりできる
- ユニットテストではオンメモリの DB を使う、などといった手法はあまり一般的ではない
- 実装の都合であればインタフェースにはしない、利用者の利便性のためのインタフェースであればあり

## 疑問

- 「インタフェースの実体」には「構造体のポインター」が入る
