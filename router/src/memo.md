## memo

``` sh
sudo ip netns exec host1 ping -c 2 192.168.0.2
```

- Ethernet
  - LAN に接続された PC 間で通信するためのもの
- ARP
  - Ethernet から IP パケットを送信する場合、送信先の IP アドレスが持つ Mac アドレス必要
  - それを知るための仕組みが ARP
    - OS が対応表を保持
    - arp コマンド
- ICMP
  - ping 発行時、以下の順でパケットが取り出される
    - Ethernet で受信
    - IP で受信
    - ICMP で受信

``` sh
make

sudo ip netns exec host1 arping -I host1-router1 192.168.1.1
```

## error

### interrupted system call

> go 言語をラズパイ上で動かしてます、ホスト oS はubuntuです。
syscall.EpollWait(epfd, events, -1) の部分で interrupted system call というエラーが出ましたがわかりますか？

"interrupted system call" エラーは、システムコールがシグナルによって中断されたことを示しています。このエラーは、通常は**ノンブロッキング I/O において発生**します。

syscall.EpollWait 関数は、Epoll ファイルディスクリプタに対してイベントの発生を待機するために使用されます。第三引数 -1 はタイムアウト時間を指定せずに待機することを意味します。

"interrupted system call" エラーが発生するのは、以下のようなケースです:

1. シグナルが到着し、システムコールが中断された場合。
1. システムコールが非ブロッキングモードで呼び出され、準備が整っていないために中断された場合。

エラーが発生している場合、プログラムは再試行するか、エラーハンドリングを行う必要があります。再試行する場合は、エラーメッセージを無視して継続することができます。

ただし、**ノンブロッキングモードでの使用においては、このエラーが発生することは一般的**です。プログラムの動作に影響を与えない場合は、単に無視しても構いません。ただし、エラーが継続的に発生する場合は、プログラムの設計やシグナルのハンドリングを見直す必要があります。

#### 解決方法

``` go
syscall.SetNonblock(sock, false)
```

環境によってはデフォルトでノンブロッキングモードになるのかな？

